(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(14),c=n.n(u),o=(n(20),n(4)),l=n(2),i=n(3),m=n.n(i),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return m.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))};function p(e){var t=e.searchResults,n=e.deletePerson;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement("p",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{id:e.id,type:"button",onClick:n},"delete"))})))}function g(e){return r.a.createElement("form",{onSubmit:e.submitNewPerson},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{type:"text",value:e.newName,onChange:e.handleNameChange}),r.a.createElement("br",null),"number:"," ",r.a.createElement("input",{type:"text",value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))}function E(e){return r.a.createElement(r.a.Fragment,null,"filter shown with",r.a.createElement("input",{type:"text",value:e.search,onChange:e.handleSearchChange}))}var v=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"success"},t)},w=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},j=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),m=i[0],s=i[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),N=O[0],C=O[1],S=Object(a.useState)(""),y=Object(l.a)(S,2),k=y[0],P=y[1],x=Object(a.useState)([]),A=Object(l.a)(x,2),D=A[0],F=A[1],I=Object(a.useState)(null),J=Object(l.a)(I,2),L=J[0],R=J[1],T=Object(a.useState)(null),B=Object(l.a)(T,2),M=B[0],q=B[1];Object(a.useEffect)((function(){console.log("effect"),f().then((function(e){u(e),F(e)}))}),[]),Object(a.useEffect)((function(){F(n)}),[n]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:L}),r.a.createElement(w,{message:M}),r.a.createElement(E,{search:k,handleSearchChange:function(e){P(e.target.value);var t=n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));F(t)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(g,{newName:m,newNumber:N,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){C(e.target.value)},submitNewPerson:function(e){e.preventDefault();var t=1;n.map((function(e){e.id===t&&(t+=1)}));var a={name:m,number:N,id:t};if(!n.some((function(e){return e.name===m})))return u(n.concat(a)),d(a).then((function(e){u(n.concat(a)),R("Added ".concat(m)),setTimeout((function(){R(null)}),5e3),s(""),C("")})),void console.log(n);if(window.confirm("".concat(m," is already added to phonebook, replace old number with  a new one?"))){var r=n.find((function(e){return e.name===m})),c=Object(o.a)(Object(o.a)({},r),{},{number:N});h(r.id,c).then((function(e){console.log("persons: ",n),n.map((function(e){console.log("foundPerson.id: ",r.id),console.log("person.id: ",e.id)})),u(n.map((function(t){return t.id!==r.id?t:e})))})).catch((function(e){console.log("error: ",e),q("Information of ".concat(m," has already been removed from server")),setTimeout((function(){q(null)}),5e3)})),s(""),C("")}}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{searchResults:D,deletePerson:function(e){var t=Number(e.target.id)||Number(e.target.getAttribute("id"));return n.map((function(e){e.id===t&&window.confirm("Delete ".concat(e.name,"?"))&&b(t).then((function(e){u(n.filter((function(e){return e.id!==t})))}))})),n}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3dffac4e.chunk.js.map