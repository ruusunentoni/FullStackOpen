{"version":3,"sources":["services/contacts.js","Persons.js","PersonForm.js","Filter.js","NewPersonNotification.js","ErrorMessage.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPersonObject","post","id","delete","updatedPerson","put","Persons","searchResults","deletePerson","map","person","index","key","name","number","type","onClick","PersonForm","props","onSubmit","submitNewPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","Filter","search","handleSearchChange","NewPersonNotification","message","className","ErrorMessage","App","useState","persons","setPersons","setNewName","setNewNumber","setSearch","setSearchResults","newPersonMessage","setNewPersonMessage","errorMessage","setErrorMessage","useEffect","personService","inititalPersons","event","target","filteredPersons","filter","toLowerCase","includes","preventDefault","newPersonId","personObject","some","window","confirm","foundPerson","find","changedPerson","returnedPersons","catch","err","console","log","setTimeout","concat","error","errorMsg","Object","values","getAttribute","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.21d473cc.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newPersonObject) => {\r\n  const request = axios.post(baseUrl, newPersonObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deleteContact = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst updateContact = (id, updatedPerson) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, updatedPerson);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, deleteContact, updateContact };\r\n","import React, { Fragment } from \"react\";\r\n\r\nexport default function Persons({ searchResults, deletePerson }) {\r\n  return (\r\n    <Fragment>\r\n      {searchResults.map((person, index) => (\r\n        <p key={person.id}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button\r\n            id={person.id}\r\n            type=\"button\"\r\n            onClick={deletePerson}\r\n            // onClick={() => console.log('HELLO')}\r\n          >\r\n            delete\r\n          </button>\r\n        </p>\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function PersonForm(props) {\r\n  return (\r\n    <form onSubmit={props.submitNewPerson}>\r\n      <div>\r\n        name:{\" \"}\r\n        <input\r\n          type=\"text\"\r\n          value={props.newName}\r\n          onChange={props.handleNameChange}\r\n        />\r\n        <br />\r\n        number:{\" \"}\r\n        <input\r\n          type=\"text\"\r\n          value={props.newNumber}\r\n          onChange={props.handleNumberChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Filter(props) {\r\n  return (\r\n    <>\r\n      filter shown with\r\n      <input\r\n        type=\"text\"\r\n        value={props.search}\r\n        onChange={props.handleSearchChange}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst NewPersonNotification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"success\">{message}</div>;\r\n};\r\n\r\nexport default NewPersonNotification;\r\n","import React from \"react\";\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{message}</div>;\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport personService from \"./services/contacts\";\r\nimport Persons from \"./Persons\";\r\nimport PersonForm from \"./PersonForm\";\r\nimport Filter from \"./Filter\";\r\nimport NewPersonNotification from \"./NewPersonNotification\";\r\nimport ErrorMessage from \"./ErrorMessage\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [newPersonMessage, setNewPersonMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // console.log(\"effect\");\r\n    personService.getAll().then((inititalPersons) => {\r\n      setPersons(inititalPersons);\r\n      setSearchResults(inititalPersons);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSearchResults(persons);\r\n  }, [persons]);\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearch(event.target.value);\r\n\r\n    let filteredPersons = persons.filter(function (person) {\r\n      return person.name.toLowerCase().includes(search.toLowerCase());\r\n    });\r\n    setSearchResults(filteredPersons);\r\n  };\r\n\r\n  const submitNewPerson = (event) => {\r\n    event.preventDefault();\r\n\r\n    let newPersonId = 1;\r\n    persons.map((person) => {\r\n      if (person.id === newPersonId) {\r\n        return (newPersonId += 1);\r\n      }\r\n    });\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: newPersonId,\r\n    };\r\n\r\n    const found = persons.some((person) => person.name === newName);\r\n    if (!found) {\r\n      // setPersons(persons.concat(personObject));\r\n      personService\r\n        .create(personObject)\r\n        .then((returnedPersons) => {\r\n          setPersons(persons.concat(personObject));\r\n\r\n          setNewPersonMessage(`Added ${newName}`);\r\n          setTimeout(() => {\r\n            setNewPersonMessage(null);\r\n          }, 5000);\r\n\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n        })\r\n        .catch((error) => {\r\n          let errorMsg = Object.values(error.response.data);\r\n          console.log(errorMsg);\r\n          setErrorMessage(errorMsg[0]);\r\n          setTimeout(() => {\r\n            setErrorMessage(null);\r\n          }, 5000);\r\n\r\n          return;\r\n        });\r\n\r\n      // console.log(persons);\r\n      return;\r\n    } else {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already added to phonebook, replace old number with  a new one?`\r\n        )\r\n      ) {\r\n        const foundPerson = persons.find((person) => person.name === newName);\r\n        const changedPerson = { ...foundPerson, number: newNumber };\r\n\r\n        // console.log(\"foundPerson.id\", foundPerson.id);\r\n        // console.log(\"changedPerson\", changedPerson);\r\n\r\n        personService\r\n          .updateContact(foundPerson.id, changedPerson)\r\n          .then((returnedPersons) => {\r\n            // console.log(\"persons: \", persons);\r\n            // persons.map((person) => {\r\n            // console.log(\"foundPerson.id: \", foundPerson.id);\r\n            // console.log(\"person.id: \", person.id);\r\n            // });\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.id !== foundPerson.id ? person : returnedPersons\r\n              )\r\n            );\r\n          })\r\n          .catch((err) => {\r\n            // setPersons(persons.concat(personObject));\r\n            console.log(\"error: \", err);\r\n\r\n            setErrorMessage(\r\n              `Information of ${newName} has already been removed from server`\r\n            );\r\n            setTimeout(() => {\r\n              setErrorMessage(null);\r\n            }, 5000);\r\n          });\r\n\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const deletePerson = (event) => {\r\n    let id = event.target.id || event.target.getAttribute(\"id\");\r\n\r\n    // console.log(\"ID: \", event.target.id);\r\n\r\n    persons.map((person) => {\r\n      if (person.id === id) {\r\n        if (window.confirm(`Delete ${person.name}?`)) {\r\n          personService.deleteContact(id).then((returnedPersons) => {\r\n            return setPersons(persons.filter((person) => person.id !== id));\r\n          });\r\n        }\r\n      }\r\n    });\r\n    return persons;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <NewPersonNotification message={newPersonMessage} />\r\n      <ErrorMessage message={errorMessage} />\r\n      <Filter search={search} handleSearchChange={handleSearchChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n        submitNewPerson={submitNewPerson}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Persons searchResults={searchResults} deletePerson={deletePerson} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}